import{d as j,y as P,u as $,r as V,c as q,b as o,j as A,i as e,f as a,n as D,F as G,g as J,l as c,t as p,m as u,T as K,z as L,E as M,D as O}from"./index-B8j9Fg8x.js";import{u as Q}from"./user-cdA6JsuI.js";import{n as k}from"./rules-6ndjMkCM.js";import"./index-_h905p1k.js";import"./axios-QLjAsgXu.js";const R={class:"text-body-2 text-grey"},te=j({__name:"Settings",setup(W){const{getters:_,commit:F}=P(),{t:r}=$(),f=V(!1),x=V(null),S=q(()=>{var n,l,i;return!(((n=_.user)==null?void 0:n.name)===t.value.name&&((l=_.user)==null?void 0:l.phone)===t.value.phone&&((i=_.user)==null?void 0:i.email)===t.value.email)}),t=V({..._.user}),z=()=>{var n;return(n=document.getElementById("fileInput"))==null?void 0:n.click()},X=async n=>{var i,g,h,v;const{valid:l}=await x.value.validate();if(l){const d=new FormData;d.append("name",t.value.name),d.append("phone",t.value.phone),d.append("email",t.value.email),(g=(i=n==null?void 0:n.target)==null?void 0:i.files)!=null&&g[0]&&d.append("file",n.target.files[0]),(h=t.value)!=null&&h.image&&d.append("image",t.value.image),(v=t.value.password)!=null&&v.trim()&&d.append("password",t.value.password);const{data:y}=await Q(_.userid,d);y.status==="ok"&&F("setUser",y.result)}};return(n,l)=>{const i=o("v-card-title"),g=o("v-img"),h=o("v-icon"),v=o("v-btn"),d=o("v-avatar"),y=o("v-hover"),C=o("v-card-text"),I=o("v-card"),m=o("v-col"),b=o("v-label"),w=o("v-text-field"),U=o("v-row"),E=o("v-form"),N=o("v-container");return J(),A(G,null,[e(N,{fluid:""},{default:a(()=>[e(U,null,{default:a(()=>[e(m,{cols:"12",sm:"4",md:"3"},{default:a(()=>[e(I,{flat:"",height:"286"},{default:a(()=>[e(i,null,{default:a(()=>[c(p(u(r)("users.image")),1)]),_:1}),e(C,null,{default:a(()=>[e(y,null,{default:a(({isHovering:s,props:T})=>[e(d,{class:"v-hover-item",size:"100%",rounded:""},{default:a(()=>{var B;return[e(g,{src:((B=u(_).user)==null?void 0:B.image)||"/icons/noimg.jpg",height:"220",width:"100%",cover:""},null,8,["src"]),e(K,{name:"fade-transition"},{default:a(()=>[e(v,L({onClick:z,color:s?"black":"transparent"},T,{height:"100%",class:"position-absolute",block:"",variant:"text"}),{default:a(()=>[M(e(h,{size:"50",color:"white"},{default:a(()=>[c("mdi-camera-party-mode")]),_:2},1536),[[O,s]])]),_:2},1040,["color"])]),_:2},1024)]}),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(I,{flat:""},{default:a(()=>[e(i,null,{default:a(()=>[c(p(u(r)("settings.title")),1)]),_:1}),e(C,null,{default:a(()=>[e(E,{ref_key:"form",ref:x},{default:a(()=>[e(U,null,{default:a(()=>[e(m,{cols:"12",sm:"6"},{default:a(()=>[e(b,null,{default:a(()=>[c(p(u(r)("users.name")),1)]),_:1}),e(w,{modelValue:t.value.name,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value.name=s),rules:u(k),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12",sm:"6"},{default:a(()=>[e(b,null,{default:a(()=>[c(p(u(r)("booking.phone")),1)]),_:1}),e(w,{modelValue:t.value.phone,"onUpdate:modelValue":l[1]||(l[1]=s=>t.value.phone=s),rules:u(k),variant:"outlined",placeholder:"998 XX XXX XX XX",density:"compact","hide-details":""},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12",sm:"6"},{default:a(()=>[e(b,null,{default:a(()=>[c(p(u(r)("booking.email")),1)]),_:1}),e(w,{modelValue:t.value.email,"onUpdate:modelValue":l[2]||(l[2]=s=>t.value.email=s),rules:u(k),variant:"outlined",placeholder:"example@mail.com",density:"compact","hide-details":""},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12",sm:"6"},{default:a(()=>[D("span",R,p(u(r)("login.password")),1),e(w,{class:"mt-1","hide-details":"",density:"compact",flat:"",variant:"outlined",autocomplete:"off",color:"primary",dirty:"","append-inner-icon":f.value?"mdi-eye":"mdi-eye-off",type:f.value?"text":"password",modelValue:t.value.password,"onUpdate:modelValue":l[3]||(l[3]=s=>t.value.password=s),"onClick:appendInner":l[4]||(l[4]=s=>f.value=!f.value)},null,8,["append-inner-icon","type","modelValue"])]),_:1}),e(m,{cols:"12",sm:"6"},{default:a(()=>[e(v,{onClick:X,disabled:!S.value,block:"",height:"42",color:"primary",variant:"flat"},{default:a(()=>[c(p(u(r)("save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),D("input",{type:"file",id:"fileInput",hidden:"",onChange:X},null,32)],64)}}});export{te as default};
