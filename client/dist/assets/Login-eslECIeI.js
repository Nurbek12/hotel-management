import{a as q,c as z}from"./index-_h905p1k.js";import{d as D,u as H,y as L,H as O,r as d,b as o,e as h,f as t,g as k,i as e,l as _,t as m,m as r,p as $}from"./index-B8j9Fg8x.js";import"./axios-QLjAsgXu.js";const J=D({__name:"Login",setup(A){const{t:s}=H(),f=L(),b=O(),c=d(!1),v=[a=>!!a||"Required"],g=d(null),u=d(!1),l=d({login:"",password:""}),V=async()=>{try{const{data:a}=await q.post("/api/user/login",{email:l.value.login,password:l.value.password});a.status==="ok"?(f.commit("setUser",a.user),f.commit("setToken",a.token),z(),b.push("/")):(Object.assign(l.value,{login:"",password:""}),u.value=!0)}catch{u.value=!0}},C=async()=>{var n;const{valid:a}=await((n=g.value)==null?void 0:n.validate());a&&V()};return(a,n)=>{const j=o("v-img"),N=o("v-avatar"),p=o("v-card-text"),T=o("v-card-title"),y=o("v-text-field"),x=o("v-col"),w=o("v-row"),U=o("v-btn"),B=o("v-card-actions"),I=o("v-form"),R=o("v-card"),S=o("v-container");return k(),h(S,{fluid:"",class:"bg-img py-0 h-100"},{default:t(()=>[e(w,{class:"h-100",justify:"center",align:"center"},{default:t(()=>[e(R,{"max-width":"400px",flat:"",width:"100%",class:"px-1 py-4"},{default:t(()=>[e(p,{class:"d-flex justify-center pb-0 pt-1"},{default:t(()=>[e(N,{rounded:"",size:"150"},{default:t(()=>[e(j,{src:"/icons/hotel.png"})]),_:1})]),_:1}),e(T,{class:"d-flex justify-center"},{default:t(()=>[_(m(r(s)("login.title")),1)]),_:1}),u.value?(k(),h(p,{key:0,class:"d-flex justify-center text-red-lighten-1 pb-1"},{default:t(()=>[_(m(r(s)("login.incorrect"))+"!",1)]),_:1})):$("",!0),e(I,{ref_key:"form",ref:g},{default:t(()=>[e(p,null,{default:t(()=>[e(w,null,{default:t(()=>[e(x,{cols:"12",class:"py-2"},{default:t(()=>[e(y,{density:"comfortable",modelValue:l.value.login,"onUpdate:modelValue":n[0]||(n[0]=i=>l.value.login=i),placeholder:r(s)("login.login"),"hide-details":"",color:"primary",rules:v,variant:"outlined"},null,8,["modelValue","placeholder"])]),_:1}),e(x,{cols:"12",class:"py-2"},{default:t(()=>[e(y,{density:"comfortable",modelValue:l.value.password,"onUpdate:modelValue":n[1]||(n[1]=i=>l.value.password=i),placeholder:r(s)("login.password"),"hide-details":"",autocomplete:"off",rules:v,color:"primary",variant:"outlined","append-inner-icon":c.value?"mdi-eye":"mdi-eye-off",type:c.value?"text":"password","onClick:appendInner":n[2]||(n[2]=i=>c.value=!c.value)},null,8,["modelValue","placeholder","append-inner-icon","type"])]),_:1})]),_:1})]),_:1}),e(B,{class:"px-4 py-1"},{default:t(()=>[e(U,{color:"primary",flat:"",height:"45",variant:"elevated",block:"",onClick:C},{default:t(()=>[_(m(r(s)("login.submit")),1)]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})}}});export{J as default};
